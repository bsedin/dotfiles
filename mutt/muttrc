## General options
set header_cache = "~/.cache/mutt"
set message_cachedir = "~/.cache/mutt"
set imap_check_subscribed
set imap_keepalive = 300
unset imap_passive
set mail_check = 60
set mbox_type=Maildir

# The default index_format is:
#       '%4C %Z %{%b %d} %-15.15L (%?l?%4l&%4c?) %s'
#
# We replace the date field '%{%b %d}', giving:
set index_format='%4C %Z %<[y?%<[m?%<[d?%[%H:%M ]&%[%a %d]>&%[%b %d]>&%[%m/%y ]> %-15.15L (%?l?%4l&%4c?) %s'
# Test  Date Range  Format String  Example
# --------------------------------------------
# %[d   Today       %[%H:%M ]      12:34
# %[m   This month  %[%a %d]       Thu 12
# %[y   This year   %[%b %d]       Dec 10
#  â€”    Older       %[%m/%y ]      06/15


# Limit view to current thread
bind index <esc>L limit-current-thread

# The 'S' (skip-quoted) command scrolls the pager past the quoted text (usually
# indented with '> '. Setting 'skip_quoted_offset' leaves some lines of quoted
# text on screen for context.

# Show three quoted lines before the reply
set skip_quoted_offset = 3

# Macros
macro index Z "<shell-escape>mbsync -a<enter>" "Sync all"

# More vim-like bindings
# bind index i  noop
bind attach,index g  noop # clear for next binding
bind attach,index gg first-entry
bind attach,index G  last-entry
bind index N  search-opposite
# bind pager i  exit
# bind pager q  toggle-quoted
bind pager /  search

# QWERTY
bind pager j  next-line
bind pager k  previous-line

bind pager g  noop # clear for next binding
bind pager gg top
bind pager G  bottom
bind index,pager \# noop
bind index,pager \& noop
bind index,pager R  group-reply

## Keys
bind attach,index,pager \CD next-page
bind attach,index,pager \CU previous-page

bind index,pager B sidebar-toggle-visible
bind index,pager \CO sidebar-open

# QWERTY
bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next

macro attach 'V' "<pipe-entry>cat > ~/.cache/mutt/mail.html; ~/bin/preview-html ~/.cache/mutt/mail.html; rm ~/.cache/mutt/mail.html<enter>"
macro index 'c' '<change-folder>?<change-dir><home>^K=<enter>'

set mailcap_path 	= ~/.config/mutt/mailcap
auto_view text/html
alternative_order text/plain text/html


# GnuPG bootstrap
# source ~/.mutt/gpg.rc

source ~/.config/mutt/mailboxes.muttrc
